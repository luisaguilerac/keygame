<!DOCTYPE html>
<html>
    <head><link rel="shortcut icon" href="http://matrix.espaciolatino.com/favicon.ico">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>KEYGAME 1.0</title>
        <script type="text/javascript" >
            //desarrollado por Luis Alberto Aguilera y Frank Kismann
            var esp = "&nbsp";
            mapa = new Array (); 
            mapa[0] = new Array (esp, esp, esp, esp, esp, esp); 
            mapa[1] = new Array (esp, esp, esp, esp, esp, esp); 
            mapa[2] = new Array (esp, esp, esp, esp, esp, esp); 
            mapa[3] = new Array (esp, esp, esp, esp, esp, esp);
            mapa[4] = new Array (esp, esp, esp, esp, esp, esp); 
            mapa[5] = new Array (esp, esp, esp, esp, esp, esp); 
            abc = new Array ('a', 'b', 'c','d', 'e');
            
            var abilitato=0;
            var strin="";     
            var b=false;
            var c=false;
            var d=false;
            var a=false;
            var e1=false;
            var f=false;
            var g=false;
            var h=false;
            var i2=false;
            var j=false;
            var k=false;
            var l=false;
            var m=false;
            var n=false;
            var o=false;
            var p=false;
            var q=false;
            var r=false;
            var s=false;
            var t=false;
            var u=false;
            var v=false;
            var w=false;
            var y=false;
            var z=false;
            var dificultad = 70;
            var posicionX=0;
            var posicionY=0;
            var retrasador = 0;
            var puntos = 0;
            var over = 0;
          

            function test(){
                //analizza se il browser e' compatibile con Javascript
                browserName=navigator.appName.charAt(0);
                browserVer=parseInt(navigator.appVersion);
                if (browserName=="M" && browserVer >= 3) abilitato=1;
                if (browserName=="N" && browserVer >= 3) abilitato=2;
                if (browserName=="N" && browserVer >= 4) abilitato=3;
                if (browserName=="M" && browserVer >= 4) abilitato=4;
            }

            function keyDown(e) {
                if (abilitato==3) {
                    //var ns4=1;
                    var nKey=e.which;
                    var ieKey=0;
                    var realkey = String.fromCharCode(e.which);
                    if(nKey==66){
                        //strin="Codice tecla in Netscape: "+nKey+". Premuto tecla "+realkey
                        b=true;
                    }else if(nKey==65){
                        a=true;
                    }else if(nKey==67){
                        c=true;
                    }else if(nKey==68){
                        d=true;
                    }else if(nKey==69){
                        e1=true;
                    }
                    else if(nKey==70){
                        f=true;
                    }
                    else if(nKey==71){
                        g=true;
                    }
                    else if(nKey==72){
                        h=true;
                    }
                    else if(nKey==73){
                        i2=true;
                    }
                    else if(nKey==74){
                        j=true;
                    }else if(nKey==75){
                        k=true;
                    }
                }
                if (abilitato==4) {
                    //var ns4=0;
                    var ieKey=event.keyCode;
                    var nKey=0;
                    var realkey = String.fromCharCode(event.keyCode);
                    if(nKey==66){
                        //strin="Codice tecla in Netscape: "+nKey+". Premuto tecla "+realkey
                        b=true;
                    }else if(nKey==65){
                        a=true;
                    }else if(nKey==67){
                        c=true;
                    }else if(nKey==68){
                        d=true;
                    }else if(nKey==69){
                        e1=true;
                    }
                    else if(nKey==70){
                        f=true;
                    }
                    else if(nKey==71){
                        g=true;
                    }
                    else if(nKey==72){
                        h=true;
                    }
                    else if(nKey==73){
                        i2=true;
                    }
                    else if(nKey==74){
                        j=true;
                    }else if(nKey==75){
                        k=true;
                    }
                    
                    
                }
                /*document.getElementById('texto').lastChild.nodeValue = strin;
    document.getElementById('personaje').src = "Megaman-2.png";
    document.getElementById('personaje').offsetTop = '70px';*/
                //alert(document.getElementById('personaje').offsetTop+","+document.getElementById('personaje').offsetLeft);
            }

            function keyUp(e) {
                if (abilitato==3) {
                    //var ns4=1;
                    var nKey=e.which;
                    var ieKey=0;
                    var realkey = String.fromCharCode(e.which);
                    if(nKey==66){
                        //strin="Codice tecla in Netscape: "+nKey+". Premuto tecla "+realkey
                        b=false;
                    }else if(nKey==65){
                        a=false;
                    }else if(nKey==67){
                        c=false;
                    }else if(nKey==68){
                        d=false;
                    }else if(nKey==69){
                        e1=false;
                    }
                    else if(nKey==70){
                        f=false;
                    }
                    else if(nKey==71){
                        g=false;
                    }
                    else if(nKey==72){
                        h=false;
                    }
                    else if(nKey==73){
                        i2=false;
                    }
                    else if(nKey==74){
                        j=false;
                    }else if(nKey==75){
                        k=false;
                    }
                }
                if (abilitato==4) {
                    //var ns4=0;
                    var ieKey=event.keyCode;
                    var nKey=0;
                    var realkey = String.fromCharCode(event.keyCode);
                    if(nKey==66){
                        //strin="Codice tecla in Netscape: "+nKey+". Premuto tecla "+realkey
                        b=false;
                    }else if(nKey==65){
                        a=false;
                    }else if(nKey==67){
                        c=false;
                    }else if(nKey==68){
                        d=false;
                    }else if(nKey==69){
                        e1=false;
                    }
                    else if(nKey==70){
                        f=false;
                    }
                    else if(nKey==71){
                        g=false;
                    }
                    else if(nKey==72){
                        h=false;
                    }
                    else if(nKey==73){
                        i2=false;
                    }
                    else if(nKey==74){
                        j=false;
                    }else if(nKey==75){
                        k=false;
                    }
                }
            }

            function main(){
                setInterval(function(){actualizar()},10);
            }
            function aleatorio(inferior,superior){ 
                numPosibilidades = superior - inferior 
                aleat = Math.random() * numPosibilidades 
                aleat = Math.round(aleat) 
                return parseInt(inferior) + aleat 
            }
            var tecla = "";
            function actualizar(){
                
                test();
                document.onkeyup = keyUp;
                document.onkeydown = keyDown;
                
                
                
                if(b==true){
                    tecla = "B";
                   
                }else if(a==true){
                    tecla = "A";
                   
                }if(c==true){
                    tecla = "C";
                    
                }if(d==true){
                    tecla = "D";
                    
                }
                if(e1==true){
                    tecla = "E";
                    
                }
                if(f==true){
                    tecla = "F";
                    
                }
                 if(g==true){
                    tecla = "G";
                    
                }
                 if(h==true){
                    tecla = "H";
                    
                }
                if(i2==true){
                    tecla = "I";
                    
                }
                if(j==true){
                    tecla = "J";
                    
                }
                 if(k==true){
                    tecla = "K";
                    
                }
                if(a==false && b==false && c==false && d==false && e1==false && f==false && g==false && h==false && i2==false && j==false && k==false ){
                    tecla = "-";
                }
                var re;
                 for(re = 0 ; re<=5;re++){
                     if(mapa[0][re] == tecla) 
                    {
                        mapa[0][re] = "<font color='red' size='6'>*</font>";
                        puntos ++;
                    }
                    if(mapa[1][re] == tecla) 
                    {
                        mapa[1][re] = "<font color='red' size='6'>*</font>";
                        puntos ++;
                    }
                    if(mapa[2][re] == tecla) 
                    {
                        mapa[2][re] = "<font color='red' size='6'>*</font>";
                        puntos ++;
                    }
                    if(mapa[3][re] == tecla) 
                    {
                        mapa[3][re] = "<font color='red' size='6'>*</font>";
                        puntos ++;
                    }
                    if(mapa[4][re] == tecla) 
                    {
                        mapa[4][re] = "<font color='red' size='6'>*</font>";
                        puntos ++;
                    }
                  
                 }
                if(puntos == 10){
                    dificultad = 50;
                    
                } 
                if(puntos == 40){
                    dificultad = 30;
                }
                if(puntos == 100){
                    dificultad = 10;
                }
                retrasador++;
                if(retrasador % dificultad == 0){
                var colocarMalo = aleatorio(0,1);
                if(colocarMalo == 0){
                    malo = new Array ('A', 'B', 'C','D', 'E','F','G','H','I','J','K');
                    mapa[0][aleatorio(0,5)] = malo[aleatorio(0,10)];
                }
                //var malo = "soy malo"; || mapa[1][i]== tecla || mapa[2][i]== tecla || mapa[3][i]== tecla || mapa[4][i]== tecla)
                var pos = 0;
                
        
                for(i = 0 ; i<=5;i++){
                    if(mapa[0][i]!=esp){
                        mapa[1][i] = mapa[0][i];
                        mapa[0][i]= esp;
                        pos=1;
                       
                    }
                    if(pos != 1){
                        if(mapa[1][i]!=esp){
                            mapa[2][i] = mapa[1][i];
                            mapa[1][i]= esp;
                            pos=2;
                        }
                    }
                    if(pos != 2){
                        if(mapa[2][i]!=esp){
                            mapa[3][i] = mapa[2][i];
                            mapa[2][i]= esp;
                            pos=3;
                        }
                    }
                    if(pos != 3){
                        if(mapa[3][i]!=esp){
                            mapa[4][i] = mapa[3][i];
                            mapa[3][i]= esp;
                            pos=4;
                        }
                    }
                    if(pos != 4){
                        if(mapa[4][i]!=esp){
                            mapa[5][i] = mapa[4][i];
                            mapa[4][i]=esp;
                            pos=5;
                            
                        }
                    }
                   if(mapa[5][i] != "-" && mapa[5][i] != "<font color='red' size='6'>*</font>" && mapa[5][i] != esp ){
                       over++;
                       mapa[5][i] = "-";
                   } 
                   mapa[5][i] = "-";
                }
                }
                document.getElementById('over').lastChild.nodeValue = over ;
                document.getElementById('puntos').lastChild.nodeValue = puntos ;
                document.getElementById('tecla').lastChild.nodeValue = tecla ;
                document.getElementById('matriz1').innerHTML = 
            
                    mapa[1][0] +esp +esp +esp+ mapa[1][1] +esp +esp +esp+ mapa[1][2]  +esp +esp +esp+ mapa[1][3] +esp +esp +esp+ mapa[1][4] +"      "+ mapa[1][5] 
                ;
                document.getElementById('matriz2').innerHTML = 
            
                    mapa[2][0] +esp +esp +esp+ mapa[2][1] +esp +esp +esp+ mapa[2][2]  +esp +esp +esp+ mapa[2][3] +esp +esp +esp+ mapa[2][4] +"      "+ mapa[2][5] 
                ;
                document.getElementById('matriz3').innerHTML = 
            
                    mapa[3][0] +esp +esp +esp+mapa[3][1] +esp +esp +esp+mapa[3][2]  +esp +esp +esp+ mapa[3][3] +esp +esp +esp+ mapa[3][4] +"      "+ mapa[3][5] 
                ;
                document.getElementById('matriz4').innerHTML = 
            
                    mapa[4][0] +esp +esp +esp+ mapa[4][1] +esp +esp +esp+ mapa[4][2] +esp +esp +esp+ mapa[4][3] +esp +esp +esp+ mapa[4][4] +"      "+ mapa[4][5] 
                ;
                document.getElementById('matriz5').innerHTML = 
            
                   mapa[5][0] +esp +esp +esp+ mapa[5][1] +esp +esp +esp+ mapa[5][2]  +esp +esp +esp+ mapa[5][3] +esp +esp +esp+ mapa[5][4] +"   "+ mapa[5][5] 
                ;
            }
            
            var juego = new main();
            
        </script>
    </head>
    <body style="color:#40FF00;font-family:'Courier',arial; " bgcolor="#000"  background="matrix.jpg">
       
        <center>
            <h1 style="text-shadow: 1px 1px 1px #757575;">KEYGAME 1.0 </h1>
            Puntos:<p id='puntos'>boton</p>
            <div  style="border: red 4px dashed;background-color:#000; width: 400px;height: 350px;font-size: 20px;" id="centro">    
        <p id='matriz1'>MAPA</p>
        <br/>
        <p id='matriz2'>MAPA</p>
        <br/>
        <p id='matriz3'>MAPA</p>
        <br/>
        <p id='matriz4'>MAPA</p>
        
        <font color="red"><p id='matriz5'>MAPA</p></font>
        </div>
            <br/>
            <font  color="red">Perdidas:<b><p id='over'>boton</p></b></font>
        <font color="green"><p id='tecla'>boton</p></font><img width=2 src='matrix.png'/>
        
      
        </center>
        <br>
    </body>
</html>
